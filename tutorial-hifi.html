<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HI-FI: Tutorial Interactivo - WW1 ARRAIGADO</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Special+Elite&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --color-primary: #4a4a3a;
            --color-accent: #8b7355;
            --color-success: #4a7c4e;
            --color-danger: #8b3a3a;
            --color-text: #2a2a2a;
            --color-bg: #e8dcc4;
        }

        body {
            font-family: 'Special Elite', 'Courier New', monospace;
            background: linear-gradient(135deg, #d4c5a9 0%, #b8a589 100%);
            color: var(--color-text);
            overflow: hidden;
            position: relative;
        }

        /* Textura de papel viejo */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,.02) 2px, rgba(0,0,0,.02) 4px),
                repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(0,0,0,.02) 2px, rgba(0,0,0,.02) 4px);
            pointer-events: none;
            opacity: 0.5;
        }

        .screen {
            display: none;
            width: 100vw;
            height: 100vh;
            position: absolute;
            top: 0;
            left: 0;
        }

        .screen.active {
            display: flex;
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* PANTALLA 1: BIENVENIDA */
        #welcome-screen {
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 40px;
        }

        .logo {
            font-size: 48px;
            margin-bottom: 20px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            animation: logoEnter 1s ease-out;
        }

        @keyframes logoEnter {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .welcome-title {
            font-size: 36px;
            margin-bottom: 30px;
            color: var(--color-primary);
            text-transform: uppercase;
            letter-spacing: 3px;
        }

        .npc-container {
            background: rgba(255,255,255,0.9);
            border: 4px solid var(--color-primary);
            border-radius: 10px;
            padding: 30px;
            max-width: 600px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            animation: npcEnter 0.8s ease-out 0.3s both;
        }

        @keyframes npcEnter {
            from {
                transform: scale(0.8);
                opacity: 0;
            }
            to {
                transform: scale(1);
                opacity: 1;
            }
        }

        .npc-avatar {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-primary) 100%);
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            border: 3px solid var(--color-primary);
        }

        .npc-name {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--color-primary);
        }

        .npc-dialogue {
            font-size: 18px;
            line-height: 1.6;
            color: var(--color-text);
        }

        .btn {
            background: linear-gradient(135deg, var(--color-success) 0%, #3a6c3e 100%);
            color: white;
            border: 3px solid #2a5c2e;
            padding: 15px 40px;
            font-size: 20px;
            font-family: 'Special Elite', monospace;
            cursor: pointer;
            margin-top: 30px;
            text-transform: uppercase;
            letter-spacing: 2px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            animation: btnPulse 2s ease-in-out infinite;
        }

        @keyframes btnPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 20px rgba(0,0,0,0.4);
            animation: none;
        }

        .btn:active {
            transform: translateY(-1px);
        }

        /* PANTALLAS DE LECCIONES */
        .lesson-screen {
            flex-direction: row;
        }

        .game-area {
            flex: 2;
            background: linear-gradient(180deg, #8b9a8b 0%, #5a6b5a 100%);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .game-area::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                repeating-linear-gradient(90deg, transparent 0px, transparent 40px, rgba(0,0,0,0.1) 40px, rgba(0,0,0,0.1) 80px),
                repeating-linear-gradient(0deg, transparent 0px, transparent 40px, rgba(0,0,0,0.1) 40px, rgba(0,0,0,0.1) 80px);
            opacity: 0.3;
        }

        .player-character {
            width: 60px;
            height: 100px;
            background: linear-gradient(135deg, #6b5b4a 0%, #4a3b2a 100%);
            border-radius: 10px;
            position: relative;
            transition: transform 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        }

        .player-character::before {
            content: 'üéñÔ∏è';
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 24px;
        }

        .target-point {
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, rgba(255,215,0,0.8) 0%, rgba(255,165,0,0.4) 100%);
            border-radius: 50%;
            border: 3px dashed #ffa500;
            position: absolute;
            animation: targetPulse 1.5s ease-in-out infinite;
        }

        @keyframes targetPulse {
            0%, 100% {
                transform: scale(1);
                opacity: 0.7;
            }
            50% {
                transform: scale(1.2);
                opacity: 1;
            }
        }

        .instruction-panel {
            flex: 1;
            background: rgba(20, 20, 20, 0.95);
            color: white;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            border-left: 5px solid var(--color-accent);
        }

        .lesson-title {
            font-size: 28px;
            margin-bottom: 30px;
            text-align: center;
            color: var(--color-accent);
            text-transform: uppercase;
            letter-spacing: 3px;
            border-bottom: 2px solid var(--color-accent);
            padding-bottom: 15px;
        }

        .objective {
            background: rgba(255,215,0,0.1);
            border: 2px solid gold;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 30px;
        }

        .objective-title {
            font-size: 18px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .controls-list {
            list-style: none;
            margin: 20px 0;
        }

        .control-item {
            background: rgba(255,255,255,0.05);
            border-left: 4px solid var(--color-accent);
            padding: 12px;
            margin: 10px 0;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: all 0.3s ease;
        }

        .control-item:hover {
            background: rgba(255,255,255,0.1);
            transform: translateX(5px);
        }

        .key-icon {
            background: linear-gradient(135deg, #ffffff 0%, #d0d0d0 100%);
            color: black;
            padding: 8px 12px;
            border-radius: 5px;
            font-weight: bold;
            min-width: 50px;
            text-align: center;
            box-shadow: 0 3px 8px rgba(0,0,0,0.3);
            border: 2px solid #999;
        }

        .key-icon.active {
            background: linear-gradient(135deg, gold 0%, orange 100%);
            animation: keyPress 0.5s ease-in-out infinite;
        }

        @keyframes keyPress {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .progress-container {
            margin-top: 30px;
        }

        .progress-label {
            font-size: 14px;
            margin-bottom: 10px;
            opacity: 0.8;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            overflow: hidden;
            border: 2px solid rgba(255,255,255,0.3);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--color-success) 0%, #6a9c6e 100%);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
        }

        .next-btn {
            background: linear-gradient(135deg, var(--color-accent) 0%, var(--color-primary) 100%);
            color: white;
            border: 3px solid var(--color-primary);
            padding: 15px;
            font-size: 18px;
            font-family: 'Special Elite', monospace;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-top: 20px;
            transition: all 0.3s ease;
            opacity: 0.5;
            pointer-events: none;
        }

        .next-btn.enabled {
            opacity: 1;
            pointer-events: all;
        }

        .next-btn.enabled:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        /* COBERTURA */
        .cover-object {
            width: 200px;
            height: 120px;
            background: linear-gradient(135deg, #8b7355 0%, #6b5b45 100%);
            position: absolute;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .cover-object::before {
            content: 'üíº';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 60px;
        }

        .cover-indicator {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 16px;
            border: 2px solid;
            display: none;
        }

        .cover-indicator.active {
            display: block;
            border-color: var(--color-success);
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from {
                transform: translateX(-50%) translateY(-20px);
                opacity: 0;
            }
            to {
                transform: translateX(-50%) translateY(0);
                opacity: 1;
            }
        }

        /* DISPARO */
        .shooting-range {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 30px;
            padding: 50px;
        }

        .target {
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, #ff6b6b 0%, #cc5555 50%, #993333 100%);
            border-radius: 50%;
            border: 4px solid #660000;
            position: relative;
            cursor: crosshair;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .target::before {
            content: 'üéØ';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 40px;
        }

        .target:hover {
            transform: scale(1.1);
        }

        .target.destroyed {
            background: radial-gradient(circle, #333 0%, #111 100%);
            animation: targetDestroy 0.5s ease-out;
            pointer-events: none;
        }

        .target.destroyed::before {
            content: 'üí•';
        }

        @keyframes targetDestroy {
            0% {
                transform: scale(1) rotate(0deg);
            }
            50% {
                transform: scale(1.3) rotate(180deg);
            }
            100% {
                transform: scale(0.8) rotate(360deg);
            }
        }

        .ammo-counter {
            position: absolute;
            top: 30px;
            left: 30px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            font-size: 20px;
            border: 3px solid var(--color-accent);
        }

        /* CURACI√ìN */
        .medkit {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #ff6b6b 0%, #cc5555 100%);
            border-radius: 10px;
            position: absolute;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 40px;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            animation: medkitFloat 2s ease-in-out infinite;
        }

        @keyframes medkitFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .medkit:hover {
            transform: scale(1.2) translateY(-5px);
        }

        .medkit.collected {
            animation: medkitCollect 0.5s ease-out forwards;
        }

        @keyframes medkitCollect {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            100% {
                transform: scale(0) translateY(-50px);
                opacity: 0;
            }
        }

        .health-bar {
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            width: 300px;
            height: 40px;
            background: rgba(0,0,0,0.8);
            border-radius: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            overflow: hidden;
        }

        .health-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b 0%, #ff4444 100%);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        /* PANTALLA DE COMPLETADO */
        #completion-screen {
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 40px;
        }

        .medal {
            font-size: 120px;
            margin-bottom: 30px;
            animation: medalSpin 2s ease-in-out;
        }

        @keyframes medalSpin {
            0% {
                transform: rotateY(0deg) scale(0);
            }
            50% {
                transform: rotateY(180deg) scale(1.2);
            }
            100% {
                transform: rotateY(360deg) scale(1);
            }
        }

        .completion-title {
            font-size: 48px;
            color: var(--color-success);
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 4px;
        }

        .skills-learned {
            background: rgba(255,255,255,0.9);
            border: 4px solid var(--color-success);
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            margin: 30px 0;
        }

        .skills-title {
            font-size: 24px;
            margin-bottom: 20px;
            color: var(--color-primary);
        }

        .skill-item {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 15px 0;
            font-size: 18px;
            text-align: left;
        }

        .checkmark {
            color: var(--color-success);
            font-size: 24px;
        }

        .button-group {
            display: flex;
            gap: 20px;
            margin-top: 30px;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #666 0%, #444 100%);
            border-color: #333;
        }

        .btn-secondary:hover {
            background: linear-gradient(135deg, #777 0%, #555 100%);
        }
    </style>
</head>
<body>
    <!-- PANTALLA 1: BIENVENIDA -->
    <div id="welcome-screen" class="screen active">
        <div class="logo">‚öîÔ∏è WW1 ARRAIGADO ‚öîÔ∏è</div>
        <h1 class="welcome-title">Campo de Entrenamiento</h1>
        
        <div class="npc-container">
            <div class="npc-avatar">üéñÔ∏è</div>
            <div class="npc-name">Sargento Miller</div>
            <div class="npc-dialogue">
                ¬°Recluta! Bienvenido al frente. Soy el Sargento Miller y ser√© tu instructor.<br><br>
                Antes de enfrentarte al enemigo, debes dominar las habilidades b√°sicas de combate.<br><br>
                Te ense√±ar√© todo lo que necesitas saber para sobrevivir en las trincheras.
            </div>
        </div>

        <button class="btn" onclick="startLesson(1)">COMENZAR ENTRENAMIENTO ‚Üí</button>
    </div>

    <!-- PANTALLA 2: LECCI√ìN MOVIMIENTO -->
    <div id="lesson1-screen" class="screen lesson-screen">
        <div class="game-area">
            <div class="player-character" id="player"></div>
            <div class="target-point" id="targetPoint" style="right: 100px; top: 50%; transform: translateY(-50%);"></div>
        </div>
        
        <div class="instruction-panel">
            <div>
                <h2 class="lesson-title">Lecci√≥n 1: Movimiento</h2>
                
                <div class="objective">
                    <div class="objective-title">üéØ Objetivo</div>
                    <div>Mu√©vete hasta el punto marcado usando las teclas WASD</div>
                </div>

                <ul class="controls-list">
                    <li class="control-item">
                        <div class="key-icon" id="key-w">W</div>
                        <span>Avanzar</span>
                    </li>
                    <li class="control-item">
                        <div class="key-icon" id="key-a">A</div>
                        <span>Izquierda</span>
                    </li>
                    <li class="control-item">
                        <div class="key-icon" id="key-s">S</div>
                        <span>Retroceder</span>
                    </li>
                    <li class="control-item">
                        <div class="key-icon" id="key-d">D</div>
                        <span>Derecha</span>
                    </li>
                    <li class="control-item">
                        <div class="key-icon">SHIFT</div>
                        <span>Correr</span>
                    </li>
                </ul>
            </div>

            <div>
                <div class="progress-container">
                    <div class="progress-label">PROGRESO DE LECCI√ìN</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress1" style="width: 0%;">0%</div>
                    </div>
                </div>
                <button class="next-btn" id="nextBtn1" onclick="startLesson(2)">SIGUIENTE LECCI√ìN ‚Üí</button>
            </div>
        </div>
    </div>

    <!-- PANTALLA 3: LECCI√ìN COBERTURA -->
    <div id="lesson2-screen" class="screen lesson-screen">
        <div class="game-area">
            <div class="player-character" id="player2" style="left: 100px; top: 50%; transform: translateY(-50%);"></div>
            <div class="cover-object" style="right: 200px; top: 50%; transform: translateY(-50%);"></div>
            <div class="cover-indicator" id="coverIndicator">üõ°Ô∏è COBERTURA ACTIVA</div>
        </div>
        
        <div class="instruction-panel">
            <div>
                <h2 class="lesson-title">Lecci√≥n 2: Cobertura</h2>
                
                <div class="objective">
                    <div class="objective-title">üéØ Objetivo</div>
                    <div>Ac√©rcate al objeto de cobertura y activa la protecci√≥n</div>
                </div>

                <ul class="controls-list">
                    <li class="control-item">
                        <div class="key-icon" id="key-c">C</div>
                        <span>Activar cobertura</span>
                    </li>
                </ul>

                <div style="background: rgba(255,215,0,0.1); border: 2px solid gold; border-radius: 8px; padding: 15px; margin-top: 20px;">
                    üí° <strong>Consejo:</strong> La cobertura reduce el da√±o recibido en un 80%. ¬°√ösala estrat√©gicamente!
                </div>
            </div>

            <div>
                <div class="progress-container">
                    <div class="progress-label">PROGRESO DE LECCI√ìN</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress2" style="width: 0%;">0%</div>
                    </div>
                </div>
                <button class="next-btn" id="nextBtn2" onclick="startLesson(3)">SIGUIENTE LECCI√ìN ‚Üí</button>
            </div>
        </div>
    </div>

    <!-- PANTALLA 4: LECCI√ìN DISPARO -->
    <div id="lesson3-screen" class="screen lesson-screen">
        <div class="game-area">
            <div class="ammo-counter" id="ammoCounter">üî´ Munici√≥n: 8/8</div>
            <div class="shooting-range" id="shootingRange">
                <div class="target" onclick="shootTarget(this)"></div>
                <div class="target" onclick="shootTarget(this)"></div>
                <div class="target" onclick="shootTarget(this)"></div>
                <div class="target" onclick="shootTarget(this)"></div>
                <div class="target" onclick="shootTarget(this)"></div>
            </div>
        </div>
        
        <div class="instruction-panel">
            <div>
                <h2 class="lesson-title">Lecci√≥n 3: Disparo</h2>
                
                <div class="objective">
                    <div class="objective-title">üéØ Objetivo</div>
                    <div>Destruye los 5 objetivos (haz clic en ellos)</div>
                </div>

                <ul class="controls-list">
                    <li class="control-item">
                        <div class="key-icon">MOUSE</div>
                        <span>Apuntar</span>
                    </li>
                    <li class="control-item">
                        <div class="key-icon">CLIC</div>
                        <span>Disparar</span>
                    </li>
                    <li class="control-item">
                        <div class="key-icon">R</div>
                        <span>Recargar</span>
                    </li>
                </ul>
            </div>

            <div>
                <div class="progress-container">
                    <div class="progress-label">OBJETIVOS DESTRUIDOS</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress3" style="width: 0%;">0/5</div>
                    </div>
                </div>
                <button class="next-btn" id="nextBtn3" onclick="startLesson(4)">SIGUIENTE LECCI√ìN ‚Üí</button>
            </div>
        </div>
    </div>

    <!-- PANTALLA 5: LECCI√ìN CURACI√ìN -->
    <div id="lesson4-screen" class="screen lesson-screen">
        <div class="game-area">
            <div class="medkit" id="medkit1" style="left: 30%; top: 30%;" onclick="collectMedkit(this)">üíä</div>
            <div class="medkit" id="medkit2" style="right: 30%; top: 60%;" onclick="collectMedkit(this)">üíä</div>
            <div class="health-bar">
                <div class="health-fill" id="healthFill" style="width: 50%;">‚ù§Ô∏è 50/100</div>
            </div>
        </div>
        
        <div class="instruction-panel">
            <div>
                <h2 class="lesson-title">Lecci√≥n 4: Curaci√≥n</h2>
                
                <div class="objective">
                    <div class="objective-title">üéØ Objetivo</div>
                    <div>Recoge los botiquines y restaura tu salud al m√°ximo</div>
                </div>

                <ul class="controls-list">
                    <li class="control-item">
                        <div class="key-icon">E</div>
                        <span>Recoger botiqu√≠n (haz clic)</span>
                    </li>
                    <li class="control-item">
                        <div class="key-icon">H</div>
                        <span>Usar botiqu√≠n</span>
                    </li>
                </ul>

                <div style="background: rgba(255,215,0,0.1); border: 2px solid gold; border-radius: 8px; padding: 15px; margin-top: 20px;">
                    üí° <strong>Consejo:</strong> Cada botiqu√≠n restaura 50 puntos de salud. ¬°No desperdicies tus recursos!
                </div>
            </div>

            <div>
                <div class="progress-container">
                    <div class="progress-label">BOTIQUINES RECOLECTADOS</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress4" style="width: 0%;">0/2</div>
                    </div>
                </div>
                <button class="next-btn" id="nextBtn4" onclick="startLesson(5)">COMPLETAR ENTRENAMIENTO ‚Üí</button>
            </div>
        </div>
    </div>

    <!-- PANTALLA 6: COMPLETADO -->
    <div id="completion-screen" class="screen">
        <div class="medal">üèÖ</div>
        <h1 class="completion-title">¬°Entrenamiento Completado!</h1>
        
        <div class="npc-container">
            <div class="npc-avatar">üéñÔ∏è</div>
            <div class="npc-name">Sargento Miller</div>
            <div class="npc-dialogue">
                ¬°Excelente trabajo, recluta!<br><br>
                Has demostrado tener lo necesario para el combate.<br>
                Ahora est√°s listo para enfrentarte al enemigo en el frente.
            </div>
        </div>

        <div class="skills-learned">
            <div class="skills-title">HABILIDADES APRENDIDAS</div>
            <div class="skill-item">
                <span class="checkmark">‚úì</span>
                <span>Movimiento b√°sico y desplazamiento t√°ctico</span>
            </div>
            <div class="skill-item">
                <span class="checkmark">‚úì</span>
                <span>Sistema de cobertura y protecci√≥n</span>
            </div>
            <div class="skill-item">
                <span class="checkmark">‚úì</span>
                <span>Disparo de precisi√≥n y recarga</span>
            </div>
            <div class="skill-item">
                <span class="checkmark">‚úì</span>
                <span>Curaci√≥n y gesti√≥n de recursos</span>
            </div>
        </div>

        <div class="button-group">
            <button class="btn btn-secondary" onclick="resetTutorial()">‚Üª REPETIR TUTORIAL</button>
            <button class="btn" onclick="alert('¬°Listo para el combate!')">IR AL FRENTE ‚Üí</button>
        </div>
    </div>

    <script>
        let currentLesson = 0;
        let playerProgress = {
            lesson1: 0,
            lesson2: 0,
            lesson3: 0,
            lesson4: 0
        };
        let targetsDestroyed = 0;
        let medkitsCollected = 0;
        let currentHealth = 50;

        function startLesson(lessonNumber) {
            // Ocultar todas las pantallas
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });

            // Mostrar la pantalla correspondiente
            if (lessonNumber === 1) {
                document.getElementById('lesson1-screen').classList.add('active');
                setupLesson1();
            } else if (lessonNumber === 2) {
                document.getElementById('lesson2-screen').classList.add('active');
                setupLesson2();
            } else if (lessonNumber === 3) {
                document.getElementById('lesson3-screen').classList.add('active');
                setupLesson3();
            } else if (lessonNumber === 4) {
                document.getElementById('lesson4-screen').classList.add('active');
                setupLesson4();
            } else if (lessonNumber === 5) {
                document.getElementById('completion-screen').classList.add('active');
            }
            
            currentLesson = lessonNumber;
        }

        // LECCI√ìN 1: MOVIMIENTO
        function setupLesson1() {
            const player = document.getElementById('player');
            let progress = 0;

            document.addEventListener('keydown', function moveHandler(e) {
                if (currentLesson !== 1) {
                    document.removeEventListener('keydown', moveHandler);
                    return;
                }

                const key = e.key.toLowerCase();
                const keyMap = { 'w': 'key-w', 'a': 'key-a', 's': 'key-s', 'd': 'key-d' };
                
                if (keyMap[key]) {
                    document.getElementById(keyMap[key]).classList.add('active');
                    setTimeout(() => {
                        document.getElementById(keyMap[key]).classList.remove('active');
                    }, 200);

                    // Simular movimiento
                    const currentLeft = parseInt(player.style.left || '0');
                    const currentTop = parseInt(player.style.top || '50%');
                    
                    if (key === 'd') player.style.left = (currentLeft + 20) + 'px';
                    if (key === 'a') player.style.left = (currentLeft - 20) + 'px';
                    
                    // Incrementar progreso
                    if (progress < 100) {
                        progress += 20;
                        updateProgress('progress1', progress);
                        
                        if (progress >= 100) {
                            document.getElementById('nextBtn1').classList.add('enabled');
                            document.getElementById('targetPoint').style.display = 'none';
                        }
                    }
                }
            });
        }

        // LECCI√ìN 2: COBERTURA
        function setupLesson2() {
            const player = document.getElementById('player2');
            const coverIndicator = document.getElementById('coverIndicator');
            let inCover = false;

            document.addEventListener('keydown', function coverHandler(e) {
                if (currentLesson !== 2) {
                    document.removeEventListener('keydown', coverHandler);
                    return;
                }

                if (e.key.toLowerCase() === 'c' && !inCover) {
                    inCover = true;
                    coverIndicator.classList.add('active');
                    document.getElementById('key-c').classList.add('active');
                    
                    setTimeout(() => {
                        updateProgress('progress2', 100);
                        document.getElementById('nextBtn2').classList.add('enabled');
                    }, 1000);
                }
            });
        }

        // LECCI√ìN 3: DISPARO
        function setupLesson3() {
            targetsDestroyed = 0;
        }

        function shootTarget(target) {
            if (target.classList.contains('destroyed')) return;
            
            target.classList.add('destroyed');
            targetsDestroyed++;
            
            const progress = (targetsDestroyed / 5) * 100;
            updateProgress('progress3', progress, targetsDestroyed + '/5');
            
            if (targetsDestroyed >= 5) {
                document.getElementById('nextBtn3').classList.add('enabled');
            }
        }

        // LECCI√ìN 4: CURACI√ìN
        function setupLesson4() {
            medkitsCollected = 0;
            currentHealth = 50;
        }

        function collectMedkit(medkit) {
            medkit.classList.add('collected');
            medkitsCollected++;
            currentHealth = Math.min(100, currentHealth + 50);
            
            updateHealth();
            
            const progress = (medkitsCollected / 2) * 100;
            updateProgress('progress4', progress, medkitsCollected + '/2');
            
            setTimeout(() => {
                medkit.style.display = 'none';
            }, 500);
            
            if (medkitsCollected >= 2) {
                document.getElementById('nextBtn4').classList.add('enabled');
            }
        }

        function updateHealth() {
            const healthFill = document.getElementById('healthFill');
            healthFill.style.width = currentHealth + '%';
            healthFill.textContent = '‚ù§Ô∏è ' + currentHealth + '/100';
        }

        function updateProgress(elementId, percentage, text = null) {
            const progressFill = document.getElementById(elementId);
            progressFill.style.width = percentage + '%';
            progressFill.textContent = text || Math.round(percentage) + '%';
        }

        function resetTutorial() {
            location.reload();
        }
    </script>
</body>
</html>